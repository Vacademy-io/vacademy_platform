spring.application.name=assessment_service
## Database Connection
spring.datasource.url=${ASSESSMENT_SERVICE_DB_URL}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.username=${DB_USERNAME}
## Security
application.my.username=${APP_USERNAME}
application.my.password=${APP_PASSWORD}
spring.mvc.dispatch-options-request=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
logging.level.org.springframework.security=DEBUG
cloud.front.url=${CLOUD_FRONT_URL}
## Logging
org.springframework.boot.actuate.health.Logger=OFF
logging.level.org.springframework.boot.actuate.health=OFF
## auth.server.baseurl=http://localhost:8071
auth.server.baseurl=${AUTH_SERVER_BASE_URL}
admin.core.service.baseurl=${ADMIN_CORE_SERVICE_BASE_URL}
notification.server.baseurl=${NOTIFICATION_SERVER_BASE_URL}
media.service.baseurl=${MEDIA_SERVICE_BASE_URL}
## notification scheduling time frame
scheduling.time.frame=${SCHEDULING_TIME_FRAME}
spring.jpa.properties.hibernate.jdbc.time_zone=UTC



# This tells Flyway to accept an existing schema and create a baseline
spring.flyway.baseline-on-migrate=true

# This tells Flyway which version number to baseline to.
# It should match your first migration script (e.g., V1__Initial_schema.sql)
spring.flyway.baseline-version=1

# Allow out-of-order migrations and ignore missing ones
spring.flyway.out-of-order=true
spring.flyway.ignore-missing-migrations=true
spring.flyway.ignore-ignored-migrations=true
spring.flyway.validate-on-migrate=false

# ============ JPA/Hibernate Performance Optimization ============
# Use READ_COMMITTED isolation (fastest for OLTP)
spring.jpa.properties.hibernate.connection.isolation=2

# Batch operations (critical for bulk inserts/updates)
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.batch_versioned_data=true

# Fetch size (reduces round trips for large result sets)
spring.jpa.properties.hibernate.jdbc.fetch_size=100

# Statement caching (reuse prepared statements)
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=true
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.generate_statistics=false

# Query optimization
spring.jpa.properties.hibernate.query.in_clause_parameter_padding=true
# Set to false to avoid runtime exceptions; monitor logs for pagination warnings instead
spring.jpa.properties.hibernate.query.fail_on_pagination_over_collection_fetch=false

# Connection release mode (release after transaction for pooling efficiency)
spring.jpa.properties.hibernate.connection.handling_mode=DELAYED_ACQUISITION_AND_RELEASE_AFTER_TRANSACTION